### 组件概览

对话组件提供完整的聊天交互界面，支持文本对话、文件上传、自定义样式和历史记录管理。适用于客服系统、智能助手、在线咨询等需要实时对话的场景。

---

### 配置项详解

#### 核心配置

| **配置项** | **字段名**     | **类型**   | **说明**      | **默认值**                  |
| ------- | ----------- | -------- | ----------- | ------------------------ |
| 对话服务    | api         | service  | 处理对话请求的后端服务 | -                        |
| 自定义提交   | onSubmit    | function | 自定义提交逻辑的函数  | -                        |
| 显示模式    | displayMode | string   | 消息显示方式      | `accumulate`<br><br>（累加） |

#### 界面配置

| **配置项** | **字段名**          | **类型** | **说明**    | **默认值**                                                                                       |     |
| ------- | ---------------- | ------ | --------- | --------------------------------------------------------------------------------------------- | --- |
| 占位符     | placeholder.text | string | 输入框提示文字   | "询问任何问题"                                                                                      |     |
| 上传文件    | fileTypes        | array  | 允许上传的文件类型 | `images`<br><br>`gifs`<br><br>`camera`<br><br>`audio`<br><br>`microphone`<br><br>`mixedFiles` |     |

#### 样式配置

| **配置项** | **字段名**         | **类型** | **说明**   | **默认值**                                          |
| ------- | --------------- | ------ | -------- | ------------------------------------------------ |
| AI话泡样式  | aiBubbleStyle   | object | AI消息气泡样式 | `{backgroundColor: '#3cbe3c', color: '#ffffff'}` |
| 用户话泡样式  | userBubbleStyle | object | 用户消息气泡样式 | `{backgroundColor: '#6767ff', color: '#ffffff'}` |

#### 初始化配置

| **配置项** | **字段名**    | **类型** | **说明**  | **默认值**                        |
| ------- | ---------- | ------ | ------- | ------------------------------ |
| 介绍面板    | introPanel | object | 初始欢迎面板  | `{title: 'ai', descr: '....'}` |
| 对话历史    | history    | array  | 初始化历史记录 | `[{role: 'ai', text: '....'}]` |

---

### 使用示例

#### 基础对话

1. 拖拽对话组件到画布
2. 配置`对话服务`指向后端API
3. 效果：显示完整的对话界面，支持文本输入和发送

#### 文件上传

1. 设置`上传文件`为`['images', 'audio']`
2. 效果：对话界面显示图片和音频上传按钮

#### 自定义样式

1. 修改`AI话泡样式`为紫色背景
2. 设置`用户话泡样式`为绿色背景
3. 效果：显示自定义颜色的对话气泡

#### 初始化历史

1. 设置`对话历史`为：

```
[
  {"role": "ai", "text": "您好，我是客服助手"},
  {"role": "user", "text": "我有一个问题"}
]
```

效果：组件加载时显示预设的对话记录

---

### 典型应用场景

#### 智能客服

- 推荐配置：

- `对话服务`：连接客服系统API
- `上传文件`：启用图片和文件上传
- `介绍面板`：设置欢迎语和客服工作时间

#### 教育问答

- 推荐配置：

- `显示模式`：替换模式（单次问答）
- `AI话泡样式`：使用教育主题色
- `历史记录`：禁用（每次新会话）

#### 文件咨询

- 推荐配置：

- `上传文件`：启用所有文件类型
- `自定义提交`：添加文件预处理逻辑
- `占位符`："上传文件或输入问题"

---

### 注意事项

1. **服务格式**：确保API能接收`{files: Array<File>, message?: string}`格式参数
2. **文件限制**：注意不同平台的文件上传大小限制
3. **样式覆盖**：部分样式可能需要`!important`才能生效
4. **性能优化**：大量历史记录可能影响渲染性能

---

### 疑难解答

**Q: 消息发送失败？**

A: 请检查：

1. API服务是否返回正确格式
2. 网络请求是否被拦截
3. 跨域配置是否正确

**Q: 文件上传不生效？**

A: 确认：

1. 后端支持文件上传
2. 文件类型在允许范围内
3. 未超过大小限制

**Q: 如何实现打字机效果？**

A: 确保API服务是流式输出，对话组件将自动表现为打字机效果

**Q: 历史记录不保存？**

A: 需要自行实现持久化存储，在组件初始化时传入